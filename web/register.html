<html dir="ltr">
<head>

    <meta charset="utf-8"/>
    <title>用户注册</title>
    <meta name="robots" content="index, follow"/>
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>

    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1"/>

    <link
            href='http://fonts.useso.com/css?family=Ubuntu:400,700,500,300,400italic,300italic'
            rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="styles/style.css"/>
    <link rel="stylesheet" href="styles/inner.css"/>
    <link rel="stylesheet" href="styles/layout.css"/>
    <link rel="stylesheet" href="styles/color.css"/>
    <link href="styles/css.css" rel="stylesheet"/>
    <link href="styles/common.css" rel="stylesheet"/>
    <link rel="stylesheet" href="styles/prettyPhoto.css" media="screen"/>

    <script src="js/jquery-1.7.1.min.js"></script>
</head>


<body contenteditable="false">
<!--顶部样式-->
<div class="common_top">
    <div class="Narrow">
        <div class=" left logo">
            <a href="#"><img src="images/logo.png"/></a>
        </div>
        <div class="phone">
            <label>全国服务热线：</label><em>400-666-6666</em>
        </div>
    </div>
</div>
<!--用户注册样式-->
<div class="registered_style Narrow clearfix">
    <div class="left_advertising">
        <img src="images/bg_031.png"/>
    </div>

    <div class="right_register">
        <div class="register_Switching" id="register_Switching">
            <div class="bd">
                <form method="post" action="" id="register_form">
                    <!--<form id="form1" name="form1" method="post" action=""> -->
                    <div class="form clearfix">

                        <!-- 用户名 -->
                        <div class="item">
                            <label contenteditable="false" class="rgister-label">用&nbsp;&nbsp;户&nbsp;&nbsp;名：</label>
                            <input id="username_input" name="username_input" type="text" class="text"/>
                            <b>*</b>
                        </div>

                        <!-- 用户名 -->
                        <div class="item">
                            <label contenteditable="false" class="rgister-label">电&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;话：</label>
                            <input id="phone_number_input" name="phone_number_input" type="text" class="text"/>
                            <b>*</b>
                        </div>

                        <!-- 密码 -->
                        <div class="item">
                            <label contenteditable="false" class="rgister-label">密&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;码：</label>
                            <input id="password_first" name="password_first" type="password" class="text"/>
                            <b>*</b>
                        </div>

                        <!-- 确认密码 -->
                        <div class="item">
                            <label contenteditable="false" class="rgister-label ">确认密码：</label>
                            <input id="password_second" name="password_second" type="password" class="text"/><b>*</b>
                        </div>

                    </div>

                    <!-- 注册按键 -->
                    <div class="rgister-btn">
                        <input contenteditable="false" type="button"
                               style="width:160px;height:30px;" class="button"
                               value="注&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;册" onclick="doRegisterPost()"/>

                    </div>
                    <div class="Note">
							<span class="login_link">已有账号<a href="login-old.html">请登录</a>&nbsp;&nbsp;|&nbsp;&nbsp;<a
                                    href="main.html">首页</a></span>
                    </div>

                    <SCRIPT>
                        var form;

                        function doRegisterPost() {
                            var username = $("#username_input").val();
                            var password = $("#password_first").val();
                            var password_comf = $("#password_second").val();
                            var phone_number = $("#phone_number_input").val();

                            if (username === "" || password === "" || phone_number === "") {
                                alert("用户名密码不能为空");
                                return;
                            }

                            if (password !== password_comf) {
                                alert("两次输入密码不一致");
                            } else {
                                form = {
                                    "username": username,
                                    "password": password,
                                    "phone": phone_number
                                };
                                $.post("http://127.0.0.1:8080/register", form, register_call_back)
                            }
                        }


                        function register_call_back(data, status, xhr) {
                            data = "" + data;
                            if (data === "ok") {
                                $.post("http://127.0.0.1:8080/login", form, function () {
                                    window.location.replace("http://127.0.0.1:8080/main");
                                });
                            }
                            else
                                alert("用户名已存在")
                        }
                    </SCRIPT>

                </form>

            </div>
        </div>

    </div>
</div>

<!--底部样式-->
<div class="bottom_footer">
    <p>
        <a href="#">关于我们</a> | <a href="#">联系我们</a> | <a
            href="http://www.cse.neu.edu.cn">友情链接</a>
    </p>
    <p>Copyright©2018进击的菜鸟小分队.All Rights Reserved.</p>
    <p>哈哈哈二手书交易平台</p>
</div>
</body>
</html>
